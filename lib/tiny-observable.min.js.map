{"version":3,"sources":["tiny-observable.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","global","has","obj","prop","undefined","iterate","fn","ctx","arguments","keys","forEach","idx","call","s","Math","random","toString","substring","uuid","substr","r","floor","factory","arg","Observable","WeakMap","require","this","limit","listeners","hooks","value","ev","_len","args","Array","_key","handler","apply","scope","_this","addEventListener","Error","get","dispatch","set","id","_this2","lscope","on","_len2","_key2","off","removeEventListener","version","exports","module","define","observable","window"],"mappings":"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","file":"tiny-observable.min.js","sourcesContent":["/**\n * Tiny Observable for Client and Server\n *\n * @author Jason Mulligan <jason.mulligan@avoidwork.com>\n * @copyright 2015\n * @license BSD-3-Clause\n * @link http://avoidwork.github.io/tiny-observable\n * @version 1.0.0\n */\n\"use strict\";\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n(function (global) {\n\n\tvar WeakMap = global.WeakMap || require(\"es6-weak-map\");\n\tvar r = [8, 9, \"a\", \"b\"];\n\n\tfunction has(obj, prop) {\n\t\treturn obj[prop] !== undefined;\n\t}\n\n\tfunction iterate(obj, fn) {\n\t\tvar ctx = arguments.length <= 2 || arguments[2] === undefined ? obj : arguments[2];\n\t\treturn (function () {\n\t\t\tObject.keys(obj).forEach(function (i, idx) {\n\t\t\t\tfn.call(ctx, i, idx);\n\t\t\t});\n\t\t})();\n\t}\n\n\tfunction s() {\n\t\treturn ((1 + Math.random()) * 0x10000 | 0).toString(16).substring(1);\n\t}\n\n\tfunction uuid() {\n\t\treturn s() + s() + \"-\" + s() + \"-4\" + s().substr(0, 3) + \"-\" + r[Math.floor(Math.random() * 4)] + s().substr(0, 3) + \"-\" + s() + s() + s();\n\t}\n\n\tvar Observable = (function () {\n\t\tfunction Observable() {\n\t\t\tvar arg = arguments.length <= 0 || arguments[0] === undefined ? 10 : arguments[0];\n\n\t\t\t_classCallCheck(this, Observable);\n\n\t\t\tthis.limit = arg;\n\t\t\tthis.listeners = {};\n\t\t\tthis.hooks = new WeakMap();\n\t\t}\n\n\t\t_createClass(Observable, [{\n\t\t\tkey: \"dispatch\",\n\t\t\tvalue: function dispatch(ev) {\n\t\t\t\tfor (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t\t\t\t\targs[_key - 1] = arguments[_key];\n\t\t\t\t}\n\n\t\t\t\tif (ev && has(this.listeners, ev)) {\n\t\t\t\t\titerate(this.listeners[ev], function (i) {\n\t\t\t\t\t\ti.handler.apply(i.scope, args);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"hook\",\n\t\t\tvalue: function hook(target, ev) {\n\t\t\t\tvar _this = this;\n\n\t\t\t\tvar obj = undefined;\n\n\t\t\t\tif (!has(target, addEventListener)) {\n\t\t\t\t\tthrow new Error(\"Invalid Arguments\");\n\t\t\t\t}\n\n\t\t\t\tobj = this.hooks.get(target) || {};\n\n\t\t\t\tif (!has(obj, ev)) {\n\t\t\t\t\tobj[ev] = function (arg) {\n\t\t\t\t\t\t_this.dispatch(ev, arg);\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tthis.hooks.set(target, obj);\n\t\t\t\ttarget.addEventListener(ev, this.hooks.get(target)[ev], false);\n\n\t\t\t\treturn target;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"off\",\n\t\t\tvalue: function off(ev, id) {\n\t\t\t\tif (has(this.listeners, ev)) {\n\t\t\t\t\tif (id) {\n\t\t\t\t\t\tdelete this.listeners[ev][id];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdelete this.listeners[ev];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"on\",\n\t\t\tvalue: function on(ev, handler) {\n\t\t\t\tvar id = arguments.length <= 2 || arguments[2] === undefined ? uuid() : arguments[2];\n\t\t\t\tvar scope = arguments.length <= 3 || arguments[3] === undefined ? undefined : arguments[3];\n\n\t\t\t\tif (!has(this.listeners, ev)) {\n\t\t\t\t\tthis.listeners[ev] = {};\n\t\t\t\t}\n\n\t\t\t\tif (Object.keys(this.listeners[ev]).length >= this.limit) {\n\t\t\t\t\tthrow new Error(\"Possible memory leak, more than \" + this.limit + \" listeners for event: \" + ev);\n\t\t\t\t}\n\n\t\t\t\tthis.listeners[ev][id] = {\n\t\t\t\t\tscope: scope || this,\n\t\t\t\t\thandler: handler\n\t\t\t\t};\n\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"once\",\n\t\t\tvalue: function once(ev, handler) {\n\t\t\t\tvar _this2 = this;\n\n\t\t\t\tvar id = arguments.length <= 2 || arguments[2] === undefined ? uuid() : arguments[2];\n\t\t\t\tvar scope = arguments.length <= 3 || arguments[3] === undefined ? undefined : arguments[3];\n\n\t\t\t\tvar lscope = scope || this;\n\n\t\t\t\treturn this.on(ev, function () {\n\t\t\t\t\tfor (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n\t\t\t\t\t\targs[_key2] = arguments[_key2];\n\t\t\t\t\t}\n\n\t\t\t\t\thandler.apply(lscope, args);\n\t\t\t\t\t_this2.off(ev, id);\n\t\t\t\t}, id, lscope);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"unhook\",\n\t\t\tvalue: function unhook(target, ev) {\n\t\t\t\tvar obj = this.hooks.get(target);\n\n\t\t\t\tif (obj) {\n\t\t\t\t\ttarget.removeEventListener(ev, obj[ev], false);\n\t\t\t\t\tdelete obj[ev];\n\n\t\t\t\t\tif (Object.keys(obj).length === 0) {\n\t\t\t\t\t\tthis.hooks[\"delete\"](target);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.hooks.set(target, obj);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn target;\n\t\t\t}\n\t\t}]);\n\n\t\treturn Observable;\n\t})();\n\n\tfunction factory(arg) {\n\t\treturn new Observable(arg);\n\t}\n\n\tfactory.version = \"1.0.0\";\n\n\t// Node, AMD & window supported\n\tif (typeof exports !== \"undefined\") {\n\t\tmodule.exports = factory;\n\t} else if (typeof define === \"function\") {\n\t\tdefine(function () {\n\t\t\treturn factory;\n\t\t});\n\t} else {\n\t\tglobal.observable = factory;\n\t}\n})(typeof window !== \"undefined\" ? window : global);\n"]}