{"version":3,"sources":["tiny-observable.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","global","has","obj","prop","undefined","array","Array","from","iterate","fn","ctx","arguments","keys","forEach","idx","call","s","Math","random","toString","substring","uuid","substr","r","floor","factory","arg","Observable","WeakMap","require","this","limit","listeners","hooks","value","ev","_len","args","_key","handler","apply","scope","_this","ltarget","t","addEventListener","Error","get","dispatch","set","id","_this2","lscope","on","_len2","_key2","off","_this3","removeEventListener","version","exports","module","define","observable","window"],"mappings":"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","file":"tiny-observable.min.js","sourcesContent":["/**\n * Tiny Observable for Client and Server\n *\n * @author Jason Mulligan <jason.mulligan@avoidwork.com>\n * @copyright 2015\n * @license BSD-3-Clause\n * @link http://avoidwork.github.io/tiny-observable\n * @version 1.0.0\n */\n\"use strict\";\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n(function (global) {\n\n\tvar WeakMap = global.WeakMap || require(\"es6-weak-map\");\n\tvar r = [8, 9, \"a\", \"b\"];\n\n\tfunction has(obj, prop) {\n\t\treturn obj[prop] !== undefined;\n\t}\n\n\tfunction array(obj) {\n\t\treturn obj instanceof Array ? obj : has(obj, \"length\") ? Array.from(obj) : [obj];\n\t}\n\n\tfunction iterate(obj, fn) {\n\t\tvar ctx = arguments.length <= 2 || arguments[2] === undefined ? obj : arguments[2];\n\t\treturn (function () {\n\t\t\tObject.keys(obj).forEach(function (i, idx) {\n\t\t\t\tfn.call(ctx, i, idx);\n\t\t\t});\n\t\t})();\n\t}\n\n\tfunction s() {\n\t\treturn ((1 + Math.random()) * 0x10000 | 0).toString(16).substring(1);\n\t}\n\n\tfunction uuid() {\n\t\treturn s() + s() + \"-\" + s() + \"-4\" + s().substr(0, 3) + \"-\" + r[Math.floor(Math.random() * 4)] + s().substr(0, 3) + \"-\" + s() + s() + s();\n\t}\n\n\tvar Observable = (function () {\n\t\tfunction Observable() {\n\t\t\tvar arg = arguments.length <= 0 || arguments[0] === undefined ? 10 : arguments[0];\n\n\t\t\t_classCallCheck(this, Observable);\n\n\t\t\tthis.limit = arg;\n\t\t\tthis.listeners = {};\n\t\t\tthis.hooks = new WeakMap();\n\t\t}\n\n\t\t_createClass(Observable, [{\n\t\t\tkey: \"dispatch\",\n\t\t\tvalue: function dispatch(ev) {\n\t\t\t\tfor (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t\t\t\t\targs[_key - 1] = arguments[_key];\n\t\t\t\t}\n\n\t\t\t\tif (ev && has(this.listeners, ev)) {\n\t\t\t\t\titerate(this.listeners[ev], function (i) {\n\t\t\t\t\t\ti.handler.apply(i.scope, args);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"hook\",\n\t\t\tvalue: function hook(target, ev) {\n\t\t\t\tvar _this = this;\n\n\t\t\t\tvar ltarget = array(target);\n\n\t\t\t\tltarget.forEach(function (t) {\n\t\t\t\t\tvar obj = undefined;\n\n\t\t\t\t\tif (!has(t, addEventListener)) {\n\t\t\t\t\t\tthrow new Error(\"Invalid Arguments\");\n\t\t\t\t\t}\n\n\t\t\t\t\tobj = _this.hooks.get(t) || {};\n\n\t\t\t\t\tif (!has(obj, ev)) {\n\t\t\t\t\t\tobj[ev] = function (arg) {\n\t\t\t\t\t\t\t_this.dispatch(ev, arg);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\t_this.hooks.set(t, obj);\n\t\t\t\t\tt.addEventListener(ev, _this.hooks.get(t)[ev], false);\n\t\t\t\t});\n\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"off\",\n\t\t\tvalue: function off(ev, id) {\n\t\t\t\tif (has(this.listeners, ev)) {\n\t\t\t\t\tif (id) {\n\t\t\t\t\t\tdelete this.listeners[ev][id];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdelete this.listeners[ev];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"on\",\n\t\t\tvalue: function on(ev, handler) {\n\t\t\t\tvar id = arguments.length <= 2 || arguments[2] === undefined ? uuid() : arguments[2];\n\t\t\t\tvar scope = arguments.length <= 3 || arguments[3] === undefined ? undefined : arguments[3];\n\n\t\t\t\tif (!has(this.listeners, ev)) {\n\t\t\t\t\tthis.listeners[ev] = {};\n\t\t\t\t}\n\n\t\t\t\tif (Object.keys(this.listeners[ev]).length >= this.limit) {\n\t\t\t\t\tthrow new Error(\"Possible memory leak, more than \" + this.limit + \" listeners for event: \" + ev);\n\t\t\t\t}\n\n\t\t\t\tthis.listeners[ev][id] = {\n\t\t\t\t\tscope: scope || this,\n\t\t\t\t\thandler: handler\n\t\t\t\t};\n\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"once\",\n\t\t\tvalue: function once(ev, handler) {\n\t\t\t\tvar _this2 = this;\n\n\t\t\t\tvar id = arguments.length <= 2 || arguments[2] === undefined ? uuid() : arguments[2];\n\t\t\t\tvar scope = arguments.length <= 3 || arguments[3] === undefined ? undefined : arguments[3];\n\n\t\t\t\tvar lscope = scope || this;\n\n\t\t\t\treturn this.on(ev, function () {\n\t\t\t\t\tfor (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n\t\t\t\t\t\targs[_key2] = arguments[_key2];\n\t\t\t\t\t}\n\n\t\t\t\t\thandler.apply(lscope, args);\n\t\t\t\t\t_this2.off(ev, id);\n\t\t\t\t}, id, lscope);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"unhook\",\n\t\t\tvalue: function unhook(target, ev) {\n\t\t\t\tvar _this3 = this;\n\n\t\t\t\tvar ltarget = array(target);\n\n\t\t\t\tltarget.forEach(function (t) {\n\t\t\t\t\tvar obj = _this3.hooks.get(t);\n\n\t\t\t\t\tif (obj) {\n\t\t\t\t\t\tt.removeEventListener(ev, obj[ev], false);\n\t\t\t\t\t\tdelete obj[ev];\n\n\t\t\t\t\t\tif (Object.keys(obj).length === 0) {\n\t\t\t\t\t\t\t_this3.hooks[\"delete\"](t);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_this3.hooks.set(t, obj);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}]);\n\n\t\treturn Observable;\n\t})();\n\n\tfunction factory(arg) {\n\t\treturn new Observable(arg);\n\t}\n\n\tfactory.version = \"1.0.0\";\n\n\t// Node, AMD & window supported\n\tif (typeof exports !== \"undefined\") {\n\t\tmodule.exports = factory;\n\t} else if (typeof define === \"function\") {\n\t\tdefine(function () {\n\t\t\treturn factory;\n\t\t});\n\t} else {\n\t\tglobal.observable = factory;\n\t}\n})(typeof window !== \"undefined\" ? window : global);\n"]}